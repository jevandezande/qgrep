#!/usr/bin/env python3

# Reads a population analysis and outputs the leading contributors for the
# specified range of orbitals

import argparse
import importlib
import sys
sys.path.insert(0, '../')
from qgrep.helper import read
from qgrep.population.orbital_pop import ReducedOrbitalPopulation as ROP


parser = argparse.ArgumentParser(description='Get the population analysis for specified orbitals')
parser.add_argument('-i', '--input', help='The file to be read.', type=str,
                    default='output.dat')
parser.add_argument('-n', '--number', help='The number of orbitals above and '\
                    'below the fermi level to be output.', type=int, default=2)
parser.add_argument('-c', '--crop', help='Crop the output', type=bool, default=True)

args = parser.parse_args()


rop = ROP(args.input)

low = rop.homo - args.number + 1
high = rop.lumo + args.number + 1

if args.crop:
    print(rop.range(low, high).crop())
else:
    print(rop.range(low, high))
